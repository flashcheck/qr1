<!DOCTYPE html>
<html>
<head>
  <title>Transfer USDT Directly</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
</head>
<body>
  <h2>Transfer USDT Instantly</h2>

  <label>Recipient Wallet:</label><br>
  <input id="recipient" value="0xce81b9c0658B84F2a8fD7adBBeC8B7C26953D090" size="60" /><br><br>

  <label>Amount (USDT):</label><br>
  <input id="amount" value="10" /><br><br>

  <button onclick="sendUSDT()">Next</button>

  <script>
    const usdtAddress = "0x55d398326f99059fF775485246999027B3197955"; // BEP20 USDT
    const usdtAbi = [
      {
        constant: false,
        inputs: [
          { name: "recipient", type: "address" },
          { name: "amount", type: "uint256" }
        ],
        name: "transfer",
        outputs: [{ name: "", type: "bool" }],
        type: "function"
      }
    ];

    async function sendUSDT() {
      if (!window.ethereum) return alert("MetaMask required");

      const web3 = new Web3(window.ethereum);
      const accounts = await window.ethereum.request({ method: "eth_requestAccounts" });
      const sender = accounts[0];

      // Force switch to BNB Smart Chain
      try {
        await window.ethereum.request({
          method: "wallet_switchEthereumChain",
          params: [{ chainId: "0x38" }] // BNB Chain
        });
      } catch (e) {
        alert("Please switch to BNB Chain manually");
        return;
      }

      const contract = new web3.eth.Contract(usdtAbi, usdtAddress);
      const recipient = document.getElementById("recipient").value.trim();
      const amount = document.getElementById("amount").value.trim();

      const value = web3.utils.toWei(amount, "mwei"); // USDT uses 6 decimals (not 18)

      try {
        await contract.methods.transfer(recipient, value).send({ from: sender });
        alert(`✅ Sent ${amount} USDT to ${recipient}`);
      } catch (err) {
        console.error(err);
        alert("❌ Transfer failed. Make sure you have enough BNB and USDT.");
      }
    }
  </script>
</body>
</html>
